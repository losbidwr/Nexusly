<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fixed Site – Demo Gate</title>
    <style>
        :root {
            --outline: rgb(32, 32, 38);
            --inline: rgb(60, 55, 75);
            --accent: rgb(155, 125, 175);
            --high_contrast: rgb(41, 41, 55);
            --low_contrast: rgb(35, 35, 47);
            --text: rgb(180, 180, 180);
            --danger: #ff6b6b;
            --success: #61d095;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--low_contrast);
            display: flex; justify-content: center; align-items: center;
            height: 100vh; font-family: monospace; color: var(--text);
            user-select: none; /* casual deterrent */
        }

        .splash_screen, .center_box {
            text-align: center; background-color: var(--high_contrast);
            border: 1px solid var(--outline); padding: 10px;
            box-shadow: 0 0px 10px var(--outline); max-width: 360px; width: 92vw;
            border-radius: 12px;
        }

        .password_input, .enter_btn, .main_btn {
            display: block; width: 100%; max-width: 320px; margin: 0.5rem auto;
            border: 1px solid var(--inline); font-family: monospace; border-radius: 10px;
        }

        .password_input {
            background-color: var(--low_contrast); color: var(--text);
            padding: 8px; text-align: center;
        }
        .password_input:focus { outline: none; border-color: var(--accent); }

        .enter_btn, .main_btn {
            background-color: var(--accent); color: var(--text);
            padding: 8px; cursor: pointer;
        }
        .enter_btn:hover, .main_btn:hover { background-color: var(--inline); }

        .hint { font-size: 12px; opacity: 0.7; margin-top: 4px; }

        .error_msg {
            min-height: 1.2em; /* reserve space */
            color: var(--danger); font-size: 0.9rem; margin-top: 6px;
            opacity: 0; transition: opacity 200ms ease;
        }
        .error_msg.show { opacity: 1; }

        .ok_msg { color: var(--success); font-size: 0.9rem; }

        .main_content { display: none; }

        .main_image {
            display: block; max-width: 320px; width: 100%; border: 1px solid var(--inline);
            margin-bottom: 10px; border-radius: 10px;
        }

        /* DevTools deterrent overlay */
        .shield {
            position: fixed; inset: 0; background: rgba(0,0,0,0.7); color: #fff;
            display: none; align-items: center; justify-content: center; text-align: center;
            padding: 20px; backdrop-filter: blur(4px); z-index: 9999; font-family: system-ui, sans-serif;
        }
        .shield.show { display: flex; }
        .shield .box {
            background: #0e0e14; border: 1px solid #2a2a3a; padding: 16px 20px; border-radius: 12px;
            max-width: 520px;
        }
        .shield button { margin-top: 10px; padding: 8px 12px; border-radius: 10px; border: 1px solid #34344a; background: #232334; color: #ddd; cursor: pointer; }

        /* Basic anti-copy on input (not security, just friction) */
        input::-ms-reveal, input::-ms-clear { display: none; }
    </style>
</head>
<body>

    <div id="shield" class="shield" aria-hidden="true">
        <div class="box">
            <div style="font-weight:700;margin-bottom:6px;">Developer Tools Detected</div>
            <div style="opacity:.8;">For security, interactions are paused. Close DevTools to continue.</div>
            <button id="resumeBtn" type="button">I closed DevTools</button>
        </div>
    </div>

    <div id="splash_screen" class="splash_screen">
        <input type="password" class="password_input" id="password_input" placeholder="password" autocomplete="new-password" inputmode="text" />
        <button class="enter_btn" id="enter_btn">enter</button>
        <div id="msg" class="error_msg" aria-live="polite"></div>
        <div class="hint" aria-hidden="true">Press <kbd>Enter</kbd> to submit.</div>
    </div>

    <div id="main_content" class="main_content">
        <div class="center_box">
            <img src="https://via.placeholder.com/300x200" alt="placeholder image" class="main_image" />
            <button class="main_btn">main button</button>
        </div>
    </div>

    <script>
    (function() {
        'use strict';

        // --------- Inline helpers ---------
        const $ = (sel) => document.querySelector(sel);
        const splashScreen = $('#splash_screen');
        const mainContent  = $('#main_content');
        const passwordInput = $('#password_input');
        const enterButton = $('#enter_btn');
        const msg = $('#msg');
        const shield = $('#shield');
        const resumeBtn = $('#resumeBtn');

        // Prevent context menu / basic key combos (deterrent only)
        document.addEventListener('contextmenu', (e) => e.preventDefault());
        document.addEventListener('keydown', (e) => {
            const k = e.key.toLowerCase();
            // Block F12, Ctrl+Shift+I/J/C, Ctrl+U, Ctrl+S, Ctrl+P
            if (e.key === 'F12' ||
                (e.ctrlKey && e.shiftKey && ['i','j','c'].includes(k)) ||
                (e.ctrlKey && ['u','s','p'].includes(k))
            ) {
                e.preventDefault();
                showShield();
            }
        }, { capture: true });

        // Anti-DevTools heuristic (not bulletproof)
        let devtoolsOpen = false;
        function detectDevToolsHeuristic() {
            const threshold = 160; // rough sidebar width
            const open = (window.outerWidth - window.innerWidth) > threshold ||
                         (window.outerHeight - window.innerHeight) > threshold;
            if (open && !devtoolsOpen) {
                devtoolsOpen = true; showShield();
            }
        }
        setInterval(detectDevToolsHeuristic, 1000);
        resumeBtn.addEventListener('click', () => { devtoolsOpen = false; hideShield(); });
        function showShield(){ shield.classList.add('show'); document.body.style.pointerEvents = 'none'; shield.style.pointerEvents = 'auto'; }
        function hideShield(){ shield.classList.remove('show'); document.body.style.pointerEvents = ''; }

        // --------- Password generation (random per load) ---------
        function randomInt(max){ return Math.floor(Math.random() * max); }
        function pick(arr){ return arr[randomInt(arr.length)]; }
        function generatePassword(len = 14) {
            const lowers = 'abcdefghijklmnopqrstuvwxyz';
            const uppers = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const digits = '0123456789';
            const symbols = '!@#$%^&*()-_=+[]{};:,.<>/?';
            const all = lowers + uppers + digits + symbols;
            // Ensure at least one of each class
            let pwd = [pick(lowers), pick(uppers), pick(digits), pick(symbols)];
            while (pwd.length < len) pwd.push(pick(all));
            // Shuffle
            for (let i = pwd.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [pwd[i], pwd[j]] = [pwd[j], pwd[i]];
            }
            return pwd.join('');
        }

        // Store only a hash in memory (still client-side, so not real security)
        let secretHashBytes = null; // ArrayBuffer
        const secretPlain = generatePassword(16);

        async function sha256(text) {
            const enc = new TextEncoder();
            const data = enc.encode(text);
            const hash = await crypto.subtle.digest('SHA-256', data);
            return hash;
        }

        (async () => { secretHashBytes = await sha256(secretPlain); })();

        // Optional: private reveal for owner via hidden combo (Ctrl+Alt+P)
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.altKey && e.key.toLowerCase() === 'p') {
                // Briefly show the current password (owner peek)
                toast(`Current password: ${obscure(secretPlain)}`, 3000);
            }
        });

        function obscure(txt){
            // show only edges
            if (txt.length <= 6) return '•••';
            return txt.slice(0,3) + '••••••' + txt.slice(-3);
        }

        function bytesEqual(a, b) {
            if (!a || !b || a.byteLength !== b.byteLength) return false;
            const da = new Uint8Array(a), db = new Uint8Array(b);
            for (let i = 0; i < da.length; i++) if (da[i] !== db[i]) return false;
            return true;
        }

        async function checkPassword(input) {
            const inputHash = await sha256(input);
            return bytesEqual(inputHash, secretHashBytes);
        }

        function showMessage(text, type = 'error', duration = 1600) {
            msg.textContent = text;
            msg.classList.toggle('ok_msg', type === 'ok');
            msg.classList.add('show');
            clearTimeout(showMessage._t);
            showMessage._t = setTimeout(() => {
                msg.classList.remove('show');
                if (type !== 'ok') msg.textContent = '';
            }, duration);
        }

        function toast(text, duration = 1800){
            const t = document.createElement('div');
            t.textContent = text;
            Object.assign(t.style, {
                position:'fixed', left:'50%', top:'20px', transform:'translateX(-50%)',
                background:'#111726', color:'#fff', border:'1px solid #2a2a3a', padding:'8px 12px',
                borderRadius:'10px', zIndex: 9998, opacity: 0, transition: 'opacity 150ms ease'
            });
            document.body.appendChild(t);
            requestAnimationFrame(()=>{ t.style.opacity = 1; });
            setTimeout(()=>{ t.style.opacity = 0; setTimeout(()=> t.remove(), 180); }, duration);
        }

        // Submit handlers
        enterButton.addEventListener('click', async () => {
            const ok = await checkPassword(passwordInput.value);
            if (ok) {
                showMessage('Access granted', 'ok', 800);
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                }, 300);
            } else {
                showMessage('Incorrect password', 'error');
                passwordInput.value = '';
                passwordInput.focus();
            }
        });

        passwordInput.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') enterButton.click();
        });

        // Extra friction: block copy/paste on the field (deterrent only)
        ['copy','cut','paste','dragstart','drop'].forEach(evt =>
            passwordInput.addEventListener(evt, e => e.preventDefault())
        );

        // Idle debugger trap (minimal): calling debugger if anomalies (deterrent only)
        (function trap(){
            const start = performance.now();
            debugger; // if DevTools pauses, timing jumps
            const dt = performance.now() - start;
            if (dt > 200) showShield();
            setTimeout(trap, 3000 + Math.random()*1000);
        })();

    })();
    </script>
</body>
</html>
